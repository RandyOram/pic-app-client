{"version":3,"sources":["webpack:///./src/App.vue?da6e","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/CustomNav.vue","webpack:///./src/components/CustomNav.vue?3c9e","webpack:///./src/components/CustomNav.vue","webpack:///src/components/HomePage.vue","webpack:///./src/components/HomePage.vue?4285","webpack:///./src/components/HomePage.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","CustomNav","props","data","file","undefined","user","googleSignInParams","client_id","methods","onSignInSuccess","googleUser","onSignInError","error","console","log","myFunction","requestImage","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","req","request_url","api_key","wrap","_context","prev","next","XMLHttpRequest","onreadystatechange","readyState","status","processRequest","responseText","open","setRequestHeader","send","stop","response_text","_this2","imageLink","JSON","parse","link","url","lon","lat","xhr","responseType","onload","DONE","$emit","inputHandler","event","target","files","components","components_CustomNav","_vm","staticClass","_m","_v","params","on","success","href","click","staticStyle","display","type","change","$event","for","src_components_CustomNav","CustomNav_normalizeComponent","HomePage","users","map","Mapbox","Mapbox_default","loadmap","response","forEach","photos","photo","el","document","createElement","classList","add","mapboxgl","Marker","setLngLat","coordinates","longitude","latitude","setPopup","Popup","offset","setHTML","addTo","addedMarker","mapLoaded","mapClicked","e","lngLat","toArray","_callee2","_context2","json","components_HomePage","addedmarker","ref","access-token","map-options","style","center","zoom","map-load","map-click","src_components_HomePage","HomePage_normalizeComponent","Vue","use","Router","router","routes","path","component","GSignInButton","config","productionTip","App","template"],"mappings":"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","file":"static/js/app.fc390b7598e10a20fee0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a488b596\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a488b596\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a488b596\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","\n<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <nav class=\"navbar navbar-inverse\">\n    <div class=\"container-fluid\">\n      <div class=\"navbar-header\">\n        <a class=\"navbar-brand\" href=\"#\">PicMap</a>\n      </div>\n      <ul class=\"nav navbar-nav navbar-right\">\n          <li>\n            <g-signin-button\n              :params=\"googleSignInParams\"\n              @success=\"onSignInSuccess\"\n              @error=\"onSignInError\">\n              Sign in\n            </g-signin-button>\n          </li>\n          <li><a href=\"#\" @click=\"myFunction\"><span class=\"glyphicon glyphicon-user\"></span> Sign Out</a></li>\n          <li><a>\n              <div class=\"custom-file\">\n                  <input type=\"file\" class=\"custom-file-input\" id=\"inputGroupFile02\" style=\"display: none;\" @change=\"inputHandler($event)\">\n                  <label class=\"custom-file-label\" for=\"inputGroupFile02\"><span class=\"glyphicon glyphicon-upload\"></span> Choose file </label>\n              </div>\n          </a></li>\n      </ul>\n    </div>\n  </nav>\n</template>\n<script>\nexport default {\n  name: 'HomePage',\n  props: ['lon', 'lat'],\n  data () {\n    return {\n      file: undefined,\n      user:'dog',\n      /**\n       * The Auth2 parameters, as seen on\n       * https://developers.google.com/identity/sign-in/web/reference#gapiauth2initparams.\n       * As the very least, a valid client_id must present.\n       * @type {Object}\n       */\n      googleSignInParams: {\n        client_id: '1069940581127-a38qeig8qq49angii20uif9nfqb5sfc1.apps.googleusercontent.com'\n      }\n    }\n  },\n  methods: {\n    onSignInSuccess (googleUser) {\n      // `googleUser` is the GoogleUser object that represents the just-signed-in user.\n\n      // Here we would check if the user exists, if not, create the user, if they do, sign them in\n\n\n      // See https://developers.google.com/identity/sign-in/web/reference#users\n      // const profile = googleUser.getBasicProfile() // etc etc\n\n      // The ID token you need to pass to your backend:\n      // var idToken = googleUser.getAuthResponse().id_token\n      // console.log('ID Token: ' + idToken)\n      //Set the username here\n    },\n    onSignInError (error) {\n      // `error` contains any error occurred.\n      console.log('OH NOES', error)\n    },\n    myFunction () {\n      // Sign out function,\n\n      /* console.log('in myfunction')\n      var auth2 = gapi.auth2.getAuthInstance()\n      auth2.signOut().then(function () {\n        console.log('User signed out.')\n      }) */\n    },\n\n  async requestImage(file) {\n    var req = new XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState == 4 && req.status == 200) {\n       this.processRequest(req.responseText);\n      }\n    }\n    var request_url = 'https://api.imgur.com/3/image';\n    var api_key = 'bf6ae890fb73e6b';\n    req.open(\"POST\", request_url, true); // true for asynchronous\n    req.setRequestHeader('Authorization', 'Client-ID ' + api_key);\n    req.send(file);\n  },\n\n  processRequest(response_text) {\n    if (response_text == \"Not found\") {\n      console.log(\"Imgur album not found.\");\n    } else {\n      //Response is here\n      var json = JSON.parse(response_text);\n      let imageLink = json.data.link;\n      console.log(imageLink);\n\n      //update user schema with new photo sub doc by passing in url parameters\n      let url = 'http://localhost:3000/users/' + this.user + `?url=${imageLink}&lon=${this.lon}&lat=${this.lat}`;\n      console.log(url);\n      var xhr = new XMLHttpRequest();\n      xhr.open('PUT', url, true);\n      xhr.responseType = 'text';\n      console.log(\"Request about to onload\")\n      xhr.onload = () => {\n        console.log(\"in onload for update image xmlhttpr\")\n          if (xhr.readyState === xhr.DONE) {\n              if (xhr.status === 200) {\n                  console.log('trying to add marker to map after image upload')\n                 /*  this.users = xhr.response;\n                  let photo = this.users.photos[this.users.photos.length-1];\n                  var el = document.createElement('div').classList.add('marker');\n                  new mapboxgl.Marker(el).setLngLat([photo.coordinates.longitude, photo.coordinates.latitude]).setPopup(new mapboxgl.Popup({ offset: 25 }).setHTML(`<img src=${photo.url} alt=\"\" height=\"84\" width=\"84\">`)).addTo(map); */\n                //Emit event to reload map\n                this.$emit('addedmarker');\n              }\n          }\n      };\n      xhr.send(null);\n    }\n  },\n\n  inputHandler(event) {\n      //Handle image upload here\n      this.file = event.target.files[0];\n      console.log(\"File has been changed\")\n      this.requestImage(this.file);\n    }\n\n  },\n\n\n  components: {\n\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.g-signin-button {\n    /* This is where you control how the button looks. Be creative! */\n    display: inline-block;\n    padding: 4px 8px;\n    border-radius: 3px;\n    background-color: #3c82f7;\n    color: #fff;\n    box-shadow: 0 3px 0 #0f69ff;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CustomNav.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('nav',{staticClass:\"navbar navbar-inverse\"},[_c('div',{staticClass:\"container-fluid\"},[_vm._m(0),_vm._v(\" \"),_c('ul',{staticClass:\"nav navbar-nav navbar-right\"},[_c('li',[_c('g-signin-button',{attrs:{\"params\":_vm.googleSignInParams},on:{\"success\":_vm.onSignInSuccess,\"error\":_vm.onSignInError}},[_vm._v(\"\\n            Sign in\\n          \")])],1),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.myFunction}},[_c('span',{staticClass:\"glyphicon glyphicon-user\"}),_vm._v(\" Sign Out\")])]),_vm._v(\" \"),_c('li',[_c('a',[_c('div',{staticClass:\"custom-file\"},[_c('input',{staticClass:\"custom-file-input\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"inputGroupFile02\"},on:{\"change\":function($event){_vm.inputHandler($event)}}}),_vm._v(\" \"),_vm._m(1)])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"navbar-header\"},[_c('a',{staticClass:\"navbar-brand\",attrs:{\"href\":\"#\"}},[_vm._v(\"PicMap\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"custom-file-label\",attrs:{\"for\":\"inputGroupFile02\"}},[_c('span',{staticClass:\"glyphicon glyphicon-upload\"}),_vm._v(\" Choose file \")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-55d3907e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CustomNav.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-55d3907e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CustomNav.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomNav.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomNav.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-55d3907e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CustomNav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-55d3907e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CustomNav.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"map\">\n    <CustomNav  :lon=\"lon\" :lat=\"lat\" @addedmarker=\"addedMarker\"></CustomNav>\n    <mapbox\n      access-token=\"pk.eyJ1IjoiZHlsYW5hbHZhcmV6MSIsImEiOiJjam4wbjhhdnkxYjVkM3Fyb2luYjhqenZwIn0.XxYiYeuAkCkeBheh1_hYFA\"\n      :map-options=\"{\n        style: 'mapbox://styles/mapbox/dark-v9',\n        center: [-96, 37.8],\n        zoom: 3 }\"\n        @map-load=\"mapLoaded\"\n        @map-click=\"mapClicked\"\n        ref=\"map\">\n    </mapbox>\n  </div>\n</template>\n\n<script>\nimport Mapbox from 'mapbox-gl-vue'\nimport CustomNav from './CustomNav.vue'\nexport default {\n  name: 'HomePage',\n  data () {\n    return {\n      users : [],\n      lon: undefined,\n      lat: undefined,\n      map: undefined\n    }\n  },\n  components: {\n    Mapbox, CustomNav\n  },\n  methods: {\n\n    //Asynch fetch to get users from database\n    async loadmap (map) {\n      //clear map before drawing all markers\n\n\n      //open xmlhttp request\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', 'http://localhost:3000/users/', true);\n      xhr.responseType = 'json';\n      xhr.onload = function () {\n          if (xhr.readyState === xhr.DONE) {\n              if (xhr.status === 200) {\n                  console.log(xhr.response);\n                  this.users = xhr.response;\n\n                  this.users.forEach(user => {\n                    user.photos.forEach(photo => {\n                        console.log(photo.url);\n\n                        var el = document.createElement('div').classList.add('marker');\n\n                        // make a marker for each feature and add to the map\n                        new mapboxgl.Marker(el).setLngLat([photo.coordinates.longitude, photo.coordinates.latitude]).setPopup(new mapboxgl.Popup({ offset: 25 }).setHTML(`<img src=${photo.url} alt=\"\" height=\"84\" width=\"84\">`)).addTo(map);\n                    });\n                  });\n              }\n          }\n      };\n      await xhr.send(null);\n\n    },\n\n    addedMarker() {\n      console.log(\"heard the addedMarker event from nav, passing it to root so that child (map) can hear it\");\n      this.loadmap(this.map);\n    },\n\n    //Actual event that triggers on map load\n    mapLoaded (map) {\n      this.map = map;\n      //Don't do anything on map load since ajax request is too slow\n      this.loadmap(map);\n      console.log(\"Map: \")\n      console.log(map);\n      },\n\n\n    mapClicked(map, e) {\n      //alert(e.lngLat.toArray());\n      this.lon= e.lngLat.toArray()[0];\n      this.lat= e.lngLat.toArray()[1];\n      console.log(this.lon + \", \" + this.lat);\n    },\n\n    // The xmlhttp request to host the image on imgur\n    async requestImage (file) {\n      var req = new XMLHttpRequest();\n      req.onreadystatechange = function() {\n        if (req.readyState == 4 && req.status == 200) {\n          processRequest(req.responseText);\n        }\n      }\n      var request_url = 'https://api.imgur.com/3/image';\n      var api_key = 'bf6ae890fb73e6b';\n      req.open(\"POST\", request_url, true); // true for asynchronous\n      req.setRequestHeader('Authorization', 'Client-ID ' + api_key);\n      req.send(file);\n    },\n\n    //xmlhttp response\n    processRequest (response_text) {\n      if (response_text == \"Not found\") {\n        console.log(\"Imgur album not found.\")\n      }\n      else {\n        //Response is here\n        var json = JSON.parse(response_text);\n        console.log(json)\n        imageLink = json.data.link;\n        console.log(imageLink)\n        // Here we probably would want to update the user with the new image, then reload the map\n\n        //Make express api call to update user by adding an image\n\n        //Reload/Repopulate the map with new info\n\n      }\n    }\n\n\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\na {\n  color: #42b983;\n}\n\n#map {\n  width: 100%;\n  height: 85%;\n}\n\n.marker {\n  background-image: url('https://raw.githubusercontent.com/RandyOram/RandyOram.github.io/master/PicApp/mapbox-icon.png');\n  background-size: cover;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HomePage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\"},[_c('CustomNav',{attrs:{\"lon\":_vm.lon,\"lat\":_vm.lat},on:{\"addedmarker\":_vm.addedMarker}}),_vm._v(\" \"),_c('mapbox',{ref:\"map\",attrs:{\"access-token\":\"pk.eyJ1IjoiZHlsYW5hbHZhcmV6MSIsImEiOiJjam4wbjhhdnkxYjVkM3Fyb2luYjhqenZwIn0.XxYiYeuAkCkeBheh1_hYFA\",\"map-options\":{\n      style: 'mapbox://styles/mapbox/dark-v9',\n      center: [-96, 37.8],\n      zoom: 3 }},on:{\"map-load\":_vm.mapLoaded,\"map-click\":_vm.mapClicked}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-40f31ddc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HomePage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-40f31ddc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HomePage.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HomePage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HomePage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-40f31ddc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HomePage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-40f31ddc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HomePage.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport HomePage from '@/components/HomePage'\n\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'HomePage',\n      component: HomePage\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport GSignInButton from 'vue-google-signin-button'\nVue.use(GSignInButton)\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}